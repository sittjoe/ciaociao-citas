<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Agenda tu cita personalizada en Ciao Ciao Joyería. Selecciona horario, completa tus datos y asegura tu visita a nuestro showroom exclusivo.">
    <title>Ciao Ciao Joyería - Agendar Cita en Showroom</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Hero Section -->
    <section class="hero">
        <div class="hero-content">
            <div class="hero-logo">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <path d="M20 2L8 14L20 38L32 14L20 2Z" fill="currentColor"/>
                    <path d="M20 2L8 14H32L20 2Z" fill="currentColor" opacity="0.7"/>
                </svg>
            </div>
            <h1>Ciao Ciao Joyería</h1>
            <p class="hero-subtitle">Experiencia exclusiva en nuestro showroom privado</p>
            <a href="#booking" class="hero-cta">
                Agendar mi Cita
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M5 12H19M19 12L12 5M19 12L12 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
            </a>

            <div class="hero-features">
                <div class="hero-feature">
                    <svg class="hero-feature-icon" viewBox="0 0 32 32" fill="none">
                        <path d="M16 2L6 7V15C6 22 16 30 16 30C16 30 26 22 26 15V7L16 2Z" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M12 16L15 19L21 13" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span class="hero-feature-text">Privado y Seguro</span>
                </div>
                <div class="hero-feature">
                    <svg class="hero-feature-icon" viewBox="0 0 32 32" fill="none">
                        <circle cx="16" cy="16" r="12" stroke="currentColor" stroke-width="2" fill="none"/>
                        <path d="M16 8V16L21 19" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    <span class="hero-feature-text">Rápido y Fácil</span>
                </div>
                <div class="hero-feature">
                    <svg class="hero-feature-icon" viewBox="0 0 32 32" fill="none">
                        <rect x="4" y="6" width="24" height="22" rx="2" stroke="currentColor" stroke-width="2" fill="none"/>
                        <line x1="4" y1="12" x2="28" y2="12" stroke="currentColor" stroke-width="2"/>
                    </svg>
                    <span class="hero-feature-text">Horarios Flexibles</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Booking Section -->
    <div class="container" id="booking">
        <div class="section-header">
            <p class="section-subtitle">RESERVA TU VISITA</p>
            <h2 class="section-title">Agenda tu Cita</h2>
            <p class="section-description">
                Completa el proceso en 4 simples pasos y asegura tu visita personalizada
            </p>
        </div>

        <!-- Progress Bar -->
        <div class="progress-container" id="progressContainer" style="display: none;">
            <div class="progress-steps">
                <div class="progress-line" id="progressLine"></div>

                <div class="step active" data-step="1">
                    <div class="step-circle">1</div>
                    <span class="step-label">Seleccionar Fecha</span>
                </div>

                <div class="step" data-step="2">
                    <div class="step-circle">2</div>
                    <span class="step-label">Seleccionar Hora</span>
                </div>

                <div class="step" data-step="3">
                    <div class="step-circle">3</div>
                    <span class="step-label">Tus Datos</span>
                </div>

                <div class="step" data-step="4">
                    <div class="step-circle">4</div>
                    <span class="step-label">Confirmar</span>
                </div>
            </div>
        </div>

        <!-- Loading Initial -->
        <div id="loadingInitial" class="loading-overlay">
            <div class="loading-content">
                <div class="spinner"></div>
                <p class="loading-text">Cargando horarios disponibles...</p>
            </div>
        </div>

        <!-- Step 1: Calendario -->
        <div id="step1" class="hidden animate-slide-up">
            <div id="calendarContainer"></div>
            <div class="text-center mt-lg">
                <button type="button" id="step1Next" class="btn btn-primary btn-lg" disabled>
                    Continuar
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 2: Horarios -->
        <div id="step2" class="hidden animate-slide-up">
            <div class="calendar-wrapper">
                <h3 class="time-slots-header" id="selectedDateTitle">Horarios Disponibles</h3>
                <div id="timeSlotsContainer" class="time-grid"></div>
            </div>
            <div class="text-center mt-lg" style="display: flex; gap: 16px; justify-content: center;">
                <button type="button" id="step2Back" class="btn btn-ghost">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Atrás
                </button>
                <button type="button" id="step2Next" class="btn btn-primary btn-lg" disabled>
                    Continuar
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 3: Formulario -->
        <div id="step3" class="hidden animate-slide-up">
            <div class="form-card">
                <form id="appointmentForm">
                    <div class="form-grid form-grid-2">
                        <div class="form-group">
                            <label for="name" class="form-label form-label-required">Nombre Completo</label>
                            <input
                                type="text"
                                id="name"
                                class="form-input"
                                placeholder="Ej: Juan Pérez García"
                                autocomplete="name"
                            />
                        </div>

                        <div class="form-group">
                            <label for="email" class="form-label form-label-required">Correo Electrónico</label>
                            <input
                                type="email"
                                id="email"
                                class="form-input"
                                placeholder="nombre@ejemplo.com"
                                autocomplete="email"
                            />
                        </div>

                        <div class="form-group">
                            <label for="phone" class="form-label form-label-required">Teléfono</label>
                            <input
                                type="tel"
                                id="phone"
                                class="form-input"
                                placeholder="+52 XXX XXX XXXX"
                                autocomplete="tel"
                            />
                            <span class="form-help">Formato: +52 XXX XXX XXXX o 10 dígitos</span>
                        </div>

                        <div class="form-group">
                            <label for="notes" class="form-label">Motivo de la visita (opcional)</label>
                            <textarea
                                id="notes"
                                class="form-textarea"
                                placeholder="Ej: Busco anillo de compromiso..."
                                rows="3"
                            ></textarea>
                        </div>
                    </div>

                    <!-- Upload Section -->
                    <div class="form-group mt-lg">
                        <label class="form-label form-label-required">Identificación Oficial</label>
                        <div class="file-upload" id="fileUploadZone">
                            <svg class="file-upload-icon" viewBox="0 0 48 48" fill="none">
                                <path d="M24 6V30" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                                <path d="M16 14L24 6L32 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M10 24V38C10 39.1046 10.8954 40 12 40H36C37.1046 40 38 39.1046 38 38V24" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <p class="file-upload-label">Arrastra tu identificación aquí</p>
                            <p class="file-upload-hint">o haz click para seleccionar</p>
                            <p class="form-help">JPG, PNG o PDF (máx. 5MB)</p>
                            <input type="file" id="identification" class="file-upload-input" accept="image/*,.pdf" />
                        </div>

                        <div class="file-preview" id="filePreview">
                            <img src="" alt="Preview" class="file-preview-image" id="previewImage" />
                            <div class="file-preview-info">
                                <p class="file-preview-name" id="fileName"></p>
                                <p class="file-preview-size" id="fileSize"></p>
                            </div>
                            <button type="button" class="file-preview-remove" id="removeFile">Eliminar</button>
                        </div>
                    </div>
                </form>
            </div>

            <div class="text-center mt-lg" style="display: flex; gap: 16px; justify-content: center;">
                <button type="button" id="step3Back" class="btn btn-ghost">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Atrás
                </button>
                <button type="button" id="step3Next" class="btn btn-primary btn-lg" disabled>
                    Continuar
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M9 18L15 12L9 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Step 4: Confirmación -->
        <div id="step4" class="hidden animate-slide-up">
            <div class="form-card">
                <h3 style="margin-bottom: 24px; text-align: center;">Confirma tu Cita</h3>

                <div class="form-grid" id="confirmationSummary">
                    <!-- Se llena dinámicamente -->
                </div>
            </div>

            <div class="text-center mt-lg" style="display: flex; gap: 16px; justify-content: center;">
                <button type="button" id="step4Back" class="btn btn-ghost">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M15 18L9 12L15 6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Editar
                </button>
                <button type="button" id="step4Confirm" class="btn btn-primary btn-lg">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                        <path d="M5 13L9 17L19 7" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    </svg>
                    Confirmar Cita
                </button>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay hidden">
        <div class="loading-content">
            <div class="spinner"></div>
            <p class="loading-text">Procesando tu solicitud...</p>
        </div>
    </div>

    <!-- Success Modal -->
    <div id="successModal" class="message-overlay hidden">
        <div class="message-card animate-slide-up">
            <div class="message-icon success">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <path d="M8 20L16 28L32 12" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
            </div>
            <h3 class="message-title">¡Solicitud Enviada!</h3>
            <p class="message-text">
                Hemos recibido tu solicitud de cita. Te enviaremos un correo de confirmación pronto.
            </p>
            <button type="button" onclick="location.reload()" class="btn btn-primary btn-lg">
                Cerrar
            </button>
        </div>
    </div>

    <!-- Error Modal -->
    <div id="errorModal" class="message-overlay hidden">
        <div class="message-card animate-slide-up">
            <div class="message-icon error">
                <svg width="40" height="40" viewBox="0 0 40 40" fill="none">
                    <line x1="12" y1="12" x2="28" y2="28" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                    <line x1="28" y1="12" x2="12" y2="28" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                </svg>
            </div>
            <h3 class="message-title">Error</h3>
            <p class="message-text" id="errorText">Ha ocurrido un error. Por favor, intenta de nuevo.</p>
            <button type="button" onclick="location.reload()" class="btn btn-secondary btn-lg">
                Intentar de Nuevo
            </button>
        </div>
    </div>

    <!-- Footer -->
    <footer>
        <div class="footer-content">
            <p class="footer-text">Ciao Ciao Joyería &copy; 2025</p>
            <a href="admin.html" class="footer-link">Acceso Administrador</a>
        </div>
    </footer>

    <!-- EmailJS SDK -->
    <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>

    <!-- Firebase SDK -->
    <script type="module" src="firebase-config.js"></script>

    <!-- App Modules -->
    <script type="module" src="app.js"></script>
</body>
</html>
